# Buffer Overflow - Stack based - Winx86

*For the buffer overflow, you need to take the binary you want to investigate and put it in your own lab to analyse and test it.  
Sometimes for CTF or on CTF platforms you will have to get it from the remote machine.*

## Some advice on how to learn

When I started, I found buffer overflow very hard.  
And today I almost enjoy it ;) :D  

In order to understand it better, here is what I did:

- Checked out Heath Adams video The Cyber Mentor on youtube (completely free, clear and very well explained)
- Completed this with the cours on HTB Academy 
- Finally I practiced on some boxes on TryHackMe

*See links in the resources below*

## Tools

### x64dbg

- [Install instructions](https://github.com/x64dbg/x64dbg)
- [Latest release](https://github.com/x64dbg/x64dbg/releases/tag/snapshot)

### Immunity Debbuger

- If you do not like x64dbg you can use Immunity Debbugger


### ERC

- Plugin for x64gdb
- [Latest release](https://github.com/Andy53/ERC.Xdbg/releases)
- `ERC --help` will show help menu
- `ERC --config SetWorkingDirectory C:\Users\User\directory` Set default working directory

## Methodology

### 1. Fuzzing parameters

- Remote fuzzing
  - `netstat -a` | to check if the bin listens on a specific port
    ```DOS
    Proto  Local Address          Foreign Address        State
    TCP    0.0.0.0:21449          IEWIN7:0               LISTENING
    ```
   - You will need chisel
     On your attacking machine `./chisel server -reverse`  
     On your victim machine .\chisel.exe client IP-DE-KALI:8080 R:21449:127.0.0.1:21449
   - From your attacking machine
     `.\nc.exe 127.0.0.1 PortNumber` | to interact with the bin remotely
    - Start fuzzing
    
     [](TODO)

## Resources

- [Buffer overflow made easy 2022 Edition - The Cyber Mentor](https://www.youtube.com/watch?v=ncBblM920jw&ab_channel=TheCyberMentor)
- [Buffer Overflows Made Easy - The Cyber Mentor](https://youtube.com/playlist?list=PLLKT__MCUeix3O0DPbmuaRuR_4Hxo4m3G)
- [Stack-Based Buffer Overflows on Windows x86 - HackTheBox Academy](https://academy.hackthebox.com/course/preview/stack-based-buffer-overflows-on-windows-x86)
- [Buffer Overflow Prep - THM](https://tryhackme.com/room/bufferoverflowprep)
- [Brainstorm - THM](https://tryhackme.com/room/brainstorm)
- [Brainpan - THM](https://tryhackme.com/room/brainpan)
- [Gatekeeper - THM](https://tryhackme.com/room/gatekeeper)
- [x64dbg](https://github.com/x64dbg/x64dbg)
- [x64dbg releases](https://github.com/x64dbg/x64dbg/releases/tag/snapshot)
- [ERC releases](https://github.com/Andy53/ERC.Xdbg/releases)
